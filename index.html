<!DOCTYPE html>
<html lang="ku" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rami.ai | ژیری دەستکرد</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+Arabic:wght@300;500;700&display=swap');
        
        body { 
            font-family: 'Noto Sans Arabic', sans-serif; 
            background-color: #050505;
            color: #ffffff;
            margin: 0;
            height: 100vh;
            overflow: hidden;
        }

        /* باگراوندی ئاڵای کوردستان بە فلتەری شوشەیی */
        .bg-kurdish {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 100%;
            height: 100%;
            background: linear-gradient(rgba(5, 5, 5, 0.8), rgba(5, 5, 5, 0.8)), 
                        url('https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcT6xzAgR5P3vdmaeliYmC92AFTCt3M2jqMXk9htlTnSEQ&s=10');
            background-size: cover;
            background-position: center;
            filter: blur(40px);
            z-index: -1;
            opacity: 0.4;
        }

        .glass-header {
            background: rgba(20, 20, 20, 0.6);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }

        .chat-container::-webkit-scrollbar { width: 4px; }
        .chat-container::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.1); border-radius: 10px; }

        /* وەڵامی ڕامی بە ستایلی جیمینای */
        .ami-response {
            background: rgba(255, 255, 255, 0.03);
            border-radius: 20px;
            border: 1px solid rgba(255, 255, 255, 0.05);
            transition: all 0.3s ease;
        }

        /* سندووقی نووسین بە درەوشانەوە */
        .input-glow:focus-within {
            box-shadow: 0 0 20px rgba(66, 133, 244, 0.15);
            border-color: rgba(66, 133, 244, 0.4);
        }
    </style>
</head>
<body class="flex flex-col">

    <div class="bg-kurdish"></div>

    <header class="glass-header p-4 flex justify-between items-center z-50">
        <div class="flex items-center gap-3">
            <img src="https://github.com/ramiqaladzay0/Rami/blob/main/C240F28D-CAFC-4D8A-8E1D-CC11347D3A05.png?raw=true" 
                 class="w-8 h-8 rounded-full border border-white/10" alt="Logo">
            <span class="text-xl font-bold tracking-tight bg-gradient-to-l from-white to-gray-400 bg-clip-text text-transparent">Rami.ai</span>
        </div>
        <div class="px-3 py-1 rounded-full border border-white/10 text-[10px] text-gray-400 uppercase tracking-widest">Kurdish AI v1</div>
    </header>

    <main id="chat-container" class="flex-1 overflow-y-auto px-4 md:px-[25%] py-10 space-y-8 chat-container">
        <div id="welcome-screen" class="h-full flex flex-col items-center justify-center text-center space-y-4 opacity-80">
            <h2 class="text-5xl font-bold text-white tracking-tight">چۆن یارمەتیت بدەم؟</h2>
            <p class="text-gray-400 text-lg font-light">بپرسە، ڕامی وەڵامت دەداتەوە...</p>
        </div>
    </main>

    <div class="p-6 md:px-[25%] bottom-0 w-full bg-gradient-to-t from-[#050505] via-[#050505]/90 to-transparent">
        <div class="input-glow relative flex items-center bg-[#121212]/80 backdrop-blur-xl border border-white/10 rounded-[22px] px-6 py-4 transition-all duration-300">
            <input id="user-input" type="text" 
                   placeholder="لە ڕامی بپرسە..." 
                   class="flex-1 outline-none text-lg bg-transparent text-white placeholder-gray-600">
            <button onclick="askRami()" class="bg-white/5 rounded-full p-2 hover:bg-white/10 transition-all">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6 text-blue-400">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M6 12L3.269 3.126A59.768 59.768 0 0121.485 12 59.77 59.77 0 013.27 20.876L5.999 12zm0 0h7.5" />
                </svg>
            </button>
        </div>
        <div class="text-[10px] text-center mt-4 text-gray-600 tracking-widest uppercase">Rami ai دەکرێک وڵامی هەڵە بداتەوە، (وڵامە گرنگەکان  بپشکنە)</div>
    </div>

    <script>
        const GROQ_API = "Gsk_efghgNWsfLgEKwCFdS4MWGdyb3FYOaOJ5zUh0DaTaNPq8xuihguM";
        const SHEET_URL = "https://script.google.com/macros/s/AKfycbw9BstYmzi4yyvDYvKtQX0fJNkz50aWFVrDfFtdqleFYYBkNODXl3ZSWBqZZM8Bl2cljA/exec";

        async function askRami() {
            const inputField = document.getElementById('user-input');
            const message = inputField.value.trim();
            if (!message) return;

            document.getElementById('welcome-screen').classList.add('hidden');
            appendMessage('user', message);
            inputField.value = '';

            try {
                const response = await fetch("https://api.groq.com/openai/v1/chat/completions", {
                    method: "POST",
                    headers: { "Authorization": `Bearer ${GROQ_API}`, "Content-Type": "application/json" },
                    body: JSON.stringify({
                        model: "llama3-8b-8192",
                        messages: [{ role: "system", content: "تۆ ناوت ڕامییە، یاریدەدەرێکی کوردی زۆر ڕێزدار و زیرەکیت." }, { role: "user", content: message }]
                    })
                });
                const data = await response.json();
                const aiResponse = data.choices[0].message.content;
                appendMessage('assistant', aiResponse);
                saveToSheet(message, aiResponse);
            } catch (error) {
                appendMessage('assistant', "ببوورە کێشەیەک دروستبوو!");
            }
        }

        function appendMessage(role, text) {
            const container = document.getElementById('chat-container');
            const div = document.createElement('div');
            div.className = `flex gap-4 p-5 animate-in fade-in duration-500 ${role === 'assistant' ? 'ami-response' : 'justify-end'}`;
            
            const content = role === 'user' 
                ? `<div class="bg-blue-600/20 border border-blue-500/20 text-blue-100 p-4 rounded-2xl max-w-[90%] shadow-lg">${text}</div>`
                : `<div class="flex gap-4">
                     <img src="https://github.com/ramiqaladzay0/Rami/blob/main/C240F28D-CAFC-4D8A-8E1D-CC11347D3A05.png?raw=true" class="w-8 h-8 rounded-full border border-white/10 shrink-0">
                     <div class="text-gray-100 leading-relaxed text-md pt-1">${text}</div>
                   </div>`;
            
            div.innerHTML = content;
            container.appendChild(div);
            container.scrollTo({ top: container.scrollHeight, behavior: 'smooth' });
        }

        function saveToSheet(u, a) {
            fetch(SHEET_URL, { method: "POST", mode: "no-cors", body: JSON.stringify({ user: u, ai: a }) });
        }
    </script>
</body>
</html>
